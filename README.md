# Webサーバ-ハンズオン

# 1 サーバとは

「サーバ」という言葉は文脈（コンテキスト）によって意味合いが変わります。ここではハードウェアとしてのサーバ、ソフトウェアとしてのサーバに分けて解説します。

> Server = サービスを提供するもの。ハイジでいうセバスチャン（執事の）のようなイメージです。

## 1.1 ハードウェアとしてのサーバ

ハードウェアの文脈で、サーバという言葉を使う場合はコンピュータの筐体を意味します。サーバコンピュータには、ディスプレイやキーボード、マウスなどを接続しないことが多く、リモートのマシンからログインして操作することもあります。

> Googleでサーバを画像検索してみると良いでしょう。


### クラウド

2005年頃まで、サーバといえば大金を払って購入し、自社のサーバルームや、データセンターに設置するのが一般的でした。

最近ではインターネットの高速化、ハードウェアの小型化、仮想化技術の進化など、様々なテクノロジーが融合し、クラウドと呼ばれる形態でサーバを利用できるようになりました。

クラウドベンダーの有名ドコロは以下のとおりです。

+ Amazon Web Services
+ Microsoft Azure
+ sakura cloud

> 最近のブームはDigital Oceanです。https://www.digitalocean.com/

## 1.2 ソフトウェアとしてのサーバ

サーバという言葉はソフトウェアとしての意味合いを持つこともありあます。たとえば、普通のパソコンの中でもサーバ型のプログラムを動作させることができます。

### ソフトウェアの分類

ソフトウェア（プログラム）は大きく２つに分けることができます。

+ 基本ソフト
  + OSのこと。WindowsやOS X、Linuxなど。
+ 応用ソフト
  + アプリケーションのこと。ExcelやFirefoxなどはこちら。

サーバプログラムは上記の中間的な位置づけになるので、ミドルウェアと呼ばれることもあります。

### サーバOS

WindowsというOSには「Windwos7」「Windows8」最近では「Windows10」などいくつかの種類があります。

普段、ヨドバシなどの量販店ではなかなか見ることがありませんがWindowsには「Windows Server 2012」など、サーバ用途に特化したOSもあります。


> ソフトウェアの種類

# 2 サーバプログラムの特徴

サーバと呼ばれるプログラムの特徴は以下のとおりです。

+ サーバプログラムは常に動作している。
  + たとえばビデオデッキのように。
+ サーバはクライアントからの要求を処理する。
  + たとえばリモコンで操作するように。
+ クライアント - サーバ間のやりとりにはルールがある。
  + SONYのリモコンにはSONY独自の通信フォーマットがあるように。


## 2.1 代表的なサーバプログラム

+ HTTPサーバ
  + Webブラウザの要求に応答するサーバ。主にHTMLを返却する。通称Webサーバ。
+ SMTPサーバ
  + メールを送信するサーバ。
+ DBサーバ
  + データを管理するサーバ。データを保存したり、保存済みのデータを参照したりできる。
+ DNSサーバ
  + ドメイン名とIPアドレスを管理するサーバ。
+ DHCPサーバ
  + 割り当て可能なIPアドレスを管理するサーバ。ネットワークに接続したコンピュータにIPアドレスを動的に割り当てる。

# 3 HTTPサーバ

HTTPサーバはクライアント-サーバ間の通信規格にHTTP（Hyper Text Transfer Protocol）を使います。

> HTTPの詳細な内容はまた勉強しましょう。そんなに難しくありません。

## 3.1 HTTPサーバ - プロダクト

HTTPクライアントとして有名なのがブラウザです。ブラウザにはChromeやFirefox、Safari、IEなど様々なプロダクトがあります。

ブラウザと同様にHTTPサーバにもいくつかのプロダクトがあります。

+ Apache
  + 世界で最も有名なHTTPサーバ。オープンソース。
+ Nginx
  + イマドキなHTTPサーバ。オープンソース。
+ IIS
  + Microsoftが開発しているHTTPサーバ。Windows上で動作する。


## 3.2 Apache

Apacheは世界で最も有名なHTTPサーバです。

http://httpd.apache.org/

Apacheはオープンソースとして開発されています。ApacheはWindows上でも、Linux上でも動作します。

> 実際仕事でApacheを使う場合は、Linux上で動かすことが多いです。


# 4 HTTPサーバを構築してみよう。しかもLinuxで。

## 4.1 サーバ会社の選定

Digital Oceanを使います。

https://www.digitalocean.com/

サーバOSにはUbutu（ubuntu-14-04-x64）を使用します。

> サーバ会社を使わなくても、ローカルパソコン上にサーバソフトをインストールすることもできます。最近はローカルパソコン上に仮想化ソフトを入れて、Linux環境を構築するのも普通です。


## 4.2 Linux（Ubuntu）サーバの起動

デモします。


## 4.3 今日使うLinuxコマンド

+ cd
  + カレントフォルダの移動
  + cd /var/www/html
+ ls
  + カレントフォルダの閲覧
  + ls -l
+ pwd
  + カレントフォルダの表示
  + pwd
+ cat
  + ファイルの表示
  + cat
+ echo
  + メッセージの表示
  + echo Hello World!

> Linuxにはviエディタというソフトが標準でインストールされています。viエディタはviコマンドで起動できます。（参考） http://net-newbie.com/linux/commands/vi.html

## Linuxサーバへの接続

Linuxサーバに接続するには次の情報が必要です。

+ 接続ホスト（IPアドレス）
+ ユーザ名
+ パスワード

> Linuxサーバに接続するには、秘密鍵を使うテクニックもあります。

### Macの人

```
ssh root@128.199.155.214
```

> Digital Oceanは初回アクセス時にパスワードの変更を要求します。好きなパスワードに変更してください。

### Winの人

Puttyというソフトが必要です。
http://ice.hotmint.com/putty/

> あとは雰囲気で

## HTTPサーバのインストール

Ubuntuはapt-getコマンドでパッケージを追加できます。

> Linuxでは追加するソフトウェアのかたまりをパッケージと呼びます。iPhoneでいうアプリのようなものです。

```
apt-get install apache2
```

10秒ほどでApacheのインストールは完了します。


## HTTPサーバの起動・停止

Apacheを起動するには次のコマンドを入力します。

```
apachectl start
```

Apacheを停止するには次のコマンドを入力します。

```
apachectl stop
```
